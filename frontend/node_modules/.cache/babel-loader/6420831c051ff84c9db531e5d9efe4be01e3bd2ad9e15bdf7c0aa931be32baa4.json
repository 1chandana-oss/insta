{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import Postdetails from'./Postdetails';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profilepic=_ref=>{let{changeprofile}=_ref;var picLink=\"https://cdn-icons-png.flaticon.com/128/64/64572.png\";const hiddenFileInput=useRef(null);const[url,setUrl]=useState(null);const[image,setImage]=useState(\"\");const handleclick=()=>{hiddenFileInput.current.click();};const postDetails=()=>{const data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"INSTA_CLONE\");data.append(\"cloud_name\",\"cloudchandana\");fetch(\"https://api.cloudinary.com/v1_1/cloudchandana/image/upload\",{method:\"post\",body:data}).then(res=>res.json()).then(data=>setUrl(data.url)).catch(err=>console.log(err));console.log(url);};const postpic=()=>{fetch(\"/uploadprofilepic\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({pic:url})}).then(res=>res.json()).then(data=>{console.log(data);changeprofile();window.location.reload();}).catch(err=>console.log(err));};useEffect(()=>{if(image){postDetails();}},[image]);useEffect(()=>{if(url){postpic();}},[url]);return/*#__PURE__*/_jsx(\"div\",{className:\"profilepic darkBg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"changepic centered\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"change profile photo\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:\"1px solid #00000030\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"upload-btn\",style:{color:\"#1EA1F7\"},onClick:handleclick,children:\"Upload Photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:hiddenFileInput,accept:\"image/*\",style:{display:\"none\"},onChange:e=>{setImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{style:{borderTop:\"1px solid #00000030\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"upload-btn\",onClick:()=>{setUrl(null);postpic();},style:{color:\"#ED4956\"},children:\"Remove Current Photo\"})}),/*#__PURE__*/_jsx(\"div\",{style:{borderTop:\"1px solid #00000030\"},children:/*#__PURE__*/_jsx(\"button\",{style:{background:\"none\",cursor:\"pointer\",border:\"none\",fontSize:\"15px\"},onClick:changeprofile,children:\"Cancle\"})})]})});};export default Profilepic;","map":{"version":3,"names":["React","useState","useEffect","useRef","Postdetails","jsx","_jsx","jsxs","_jsxs","Profilepic","_ref","changeprofile","picLink","hiddenFileInput","url","setUrl","image","setImage","handleclick","current","click","postDetails","data","FormData","append","fetch","method","body","then","res","json","catch","err","console","log","postpic","headers","localStorage","getItem","JSON","stringify","pic","window","location","reload","className","children","style","borderTop","color","onClick","type","ref","accept","display","onChange","e","target","files","background","cursor","border","fontSize"],"sources":["D:/fullstack_instagram/insta_clone/backend/frontend/src/components/Profilepic.js"],"sourcesContent":["import React,{useState,useEffect,useRef} from 'react'\r\nimport Postdetails from './Postdetails'\r\n\r\nconst Profilepic = ({changeprofile}) => {\r\n    var picLink=\"https://cdn-icons-png.flaticon.com/128/64/64572.png\"\r\n    const hiddenFileInput=useRef(null)\r\n    const [url, setUrl] = useState(null)\r\n    const [ image, setImage] = useState(\"\")\r\n    const handleclick=()=>{\r\n       hiddenFileInput.current.click()\r\n    }\r\n    const postDetails = ()=>{\r\n    const data=new FormData();\r\n    data.append(\"file\",image)\r\n    data.append(\"upload_preset\",\"INSTA_CLONE\")\r\n    data.append(\"cloud_name\",\"cloudchandana\")\r\n    fetch(\"https://api.cloudinary.com/v1_1/cloudchandana/image/upload\",{\r\n      method:\"post\",\r\n      body:data\r\n    }).then( res => res.json())\r\n    .then(data=>setUrl(data.url))\r\n    .catch(err=>console.log(err))\r\n    console.log(url)\r\n  }\r\n\r\n\r\n  const postpic=()=>{\r\n    fetch(\"/uploadprofilepic\",\r\n      {\r\n        method:\"put\",\r\n        headers:{\r\n            \"Content-Type\":\"application/json\",\r\n            \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\r\n        },\r\n        body:JSON.stringify({\r\n          pic:url\r\n        })\r\n  }).then(res=>res.json())\r\n  .then(data=>{\r\n     console.log(data)\r\n     changeprofile();\r\n     window.location.reload()\r\n  })\r\n  .catch(err=> console.log(err))\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(image){\r\n     postDetails()\r\n    }\r\n  \r\n  }, [image]);\r\n\r\n  useEffect(()=>{\r\n    if(url){\r\n        postpic();\r\n    }\r\n  },[url]);\r\n  \r\n  return (\r\n    <div className=\"profilepic darkBg\">\r\n      <div className=\"changepic centered\">\r\n        <div>\r\n            <h2>\r\n            change profile photo\r\n            </h2>\r\n        </div>\r\n        <div style={{borderTop:\"1px solid #00000030\"}}>\r\n            <button className=\"upload-btn\" style={{color:\"#1EA1F7\"}} onClick={handleclick}>Upload Photo</button>\r\n            <input type=\"file\" ref={hiddenFileInput} accept='image/*' style={{display:\"none\"}} onChange={(e)=>{setImage\r\n                (e.target.files[0])\r\n            }} />\r\n        </div>\r\n        <div style={{borderTop:\"1px solid #00000030\"}}>\r\n            <button className=\"upload-btn\" onClick={()=>{\r\n                setUrl(null);\r\n                postpic();\r\n            }} style={{color:\"#ED4956\"}}>Remove Current Photo</button>\r\n        </div>\r\n        <div style={{borderTop:\"1px solid #00000030\"}}>\r\n            <button style={{background:\"none\",cursor:\"pointer\",border:\"none\",fontSize:\"15px\"}} onClick={changeprofile}>Cancle</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profilepic\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}