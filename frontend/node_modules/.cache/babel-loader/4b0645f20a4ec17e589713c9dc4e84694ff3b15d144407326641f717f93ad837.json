{"ast":null,"code":"import React,{useState,useEffect,useId}from'react';import'./Profile.css';import Postdetails from'./Postdetails';import{useParams}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Userprofile=()=>{var profileLink=\"https://cdn-icons-png.flaticon.com/128/64/64572.png\";const{userid}=useParams();const[user,setUser]=useState(\" \");const[show,setShow]=useState(false);const[posts,setPosts]=useState([]);const[isfollow,setIsfollow]=useState(false);const followuser=userid=>{fetch(\"/follow\",{method:\"put\",headers:{\"content-type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userid})}).then(res=>{res.json();}).then(data=>{console.log(data);setIsfollow(true);});};const unfollowuser=userid=>{fetch(\"http:localhost://5000/unfollow\",{method:\"put\",headers:{\"content-type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userid})}).then(res=>res.json()).then(data=>{console.log(data);setIsfollow(false);});};useEffect(()=>{fetch(\"http://localhost:5000/user/\".concat(userid),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(res=>res.json()).then(result=>{setUser(result.user);setPosts(result.post);if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsfollow(true);}});},[isfollow]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.photo?user.photo:profileLink,alt:\" \"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),/*#__PURE__*/_jsx(\"button\",{className:\"followbtn\",onClick:()=>{if(isfollow){unfollowuser(user._id);}else{followuser(user._id);}},children:isfollow?\"Unfollow\":\"Follow\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[posts.length,\" posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" folllowing\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",margin:\"25px auto\",opacity:\"0.8\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:posts.map(pics=>{return/*#__PURE__*/_jsx(\"img\",{src:pics.photo//  onClick={()=>{toggleDetails(pics)\n// }}\n,className:\"item\"},pics._id);})})]});};export default Userprofile;","map":{"version":3,"names":["React","useState","useEffect","useId","Postdetails","useParams","jsx","_jsx","jsxs","_jsxs","Userprofile","profileLink","userid","user","setUser","show","setShow","posts","setPosts","isfollow","setIsfollow","followuser","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","followId","then","res","json","data","console","log","unfollowuser","concat","result","post","followers","includes","parse","_id","className","children","src","photo","alt","style","display","alignItems","justifyContent","name","onClick","length","following","width","margin","opacity","map","pics"],"sources":["D:/fullstack_instagram/insta_clone/backend/frontend/src/components/Userprofile.js"],"sourcesContent":["import React,{useState,useEffect, useId} from 'react'\r\nimport './Profile.css';\r\nimport Postdetails from './Postdetails';\r\nimport { useParams } from 'react-router-dom';\r\nconst Userprofile = () => {\r\n  var profileLink=\"https://cdn-icons-png.flaticon.com/128/64/64572.png\"\r\n  const {userid}=useParams()\r\n  const [user, setUser] = useState(\" \")\r\n  const [show,setShow]=useState(false)\r\n  const [posts, setPosts] = useState([])\r\n  const [isfollow, setIsfollow] = useState(false)\r\n  const followuser=(userid)=>{\r\n    fetch(\"/follow\",{\r\n        method:\"put\",\r\n        headers:{\r\n        \"content-type\":\"application/json\",\r\n        Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")\r\n      },\r\n      body:JSON.stringify({\r\n        followId:userid\r\n      })\r\n\r\n    })\r\n    .then((res)=>{res.json()})\r\n    .then((data)=>{\r\n        console.log(data);\r\n        setIsfollow(true);\r\n    })\r\n  }\r\n\r\n  const unfollowuser=(userid)=>{\r\n    fetch(\"http:localhost://5000/unfollow\",{\r\n        method:\"put\",\r\n        headers:{\r\n        \"content-type\":\"application/json\",\r\n        Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")\r\n      },\r\n      body:JSON.stringify({\r\n        followId:userid\r\n      })\r\n\r\n    })\r\n    .then((res)=>res.json())\r\n    .then((data)=>{\r\n        console.log(data)\r\n        setIsfollow(false)\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n  \r\n    fetch(`http://localhost:5000/user/${userid}`,{\r\n      headers:{\r\n        Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")\r\n      }\r\n    })\r\n    .then(res=>res.json())\r\n    .then((result)=>{\r\n      setUser(result.user)\r\n      setPosts(result.post)\r\n      if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)\r\n    ){\r\n        setIsfollow(true)\r\n      }\r\n    })\r\n  }, [isfollow])\r\n  \r\n  return (\r\n    <div className=\"profile\">\r\n      <div className=\"profile-frame\">\r\n        <div className=\"profile-pic\"> \r\n          <img src={user.photo ? user.photo : profileLink} alt =\" \"/>\r\n        </div>\r\n        <div className=\"profile-data\">\r\n            <div style={{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"}}>\r\n          <h1>{user.name}</h1>\r\n          <button className='followbtn' onClick={()=>{\r\n            if(isfollow){\r\n            unfollowuser(user._id);\r\n            }\r\n            else{\r\n                followuser(user._id)\r\n            }\r\n          }}>{isfollow ? \"Unfollow\":\"Follow\"}</button>\r\n          </div>\r\n          <div className=\"profile-info\" style={{display:\"flex\"}}>\r\n            <p>{posts.length} posts</p>\r\n            <p>{user.followers ? user.followers.length :\"0\"} followers</p>\r\n            <p>{user.following ? user.following.length:\"0\"} folllowing</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr style={{width:\"90%\",margin:\"25px auto\",opacity:\"0.8\"}}/>\r\n      <div className=\"gallery\">\r\n        {posts.map((pics)=>{\r\n             return <img key={pics._id} src={pics.photo}\r\n            //  onClick={()=>{toggleDetails(pics)\r\n            // }}\r\n             className='item'></img>\r\n        })}\r\n        \r\n        {/* <img src=\"https://t4.ftcdn.net/jpg/03/83/25/83/240_F_383258331_D8imaEMl8Q3lf7EKU2Pi78Cn0R7KkW9o.jpg\" alt=\"\" />\r\n        <img src=\"https://t4.ftcdn.net/jpg/03/83/25/83/240_F_383258331_D8imaEMl8Q3lf7EKU2Pi78Cn0R7KkW9o.jpg\" alt=\"\" />\r\n        <img src=\"https://t4.ftcdn.net/jpg/03/83/25/83/240_F_383258331_D8imaEMl8Q3lf7EKU2Pi78Cn0R7KkW9o.jpg\" alt=\"\" />\r\n        <img src=\"https://t4.ftcdn.net/jpg/03/83/25/83/240_F_383258331_D8imaEMl8Q3lf7EKU2Pi78Cn0R7KkW9o.jpg\" alt=\"\" />\r\n        <img src=\"https://t4.ftcdn.net/jpg/03/83/25/83/240_F_383258331_D8imaEMl8Q3lf7EKU2Pi78Cn0R7KkW9o.jpg\" alt=\"\" /> */}\r\n      </div>\r\n      {/* {show && \r\n      <Postdetails item={posts} toggleDetails={toggleDetails}/>\r\n      } */}\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Userprofile\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}